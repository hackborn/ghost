<graph>
	<!-- Command line args that can be passed into the app when this graph is selected.
	Args names can't conflict with any names in macros. -->
	<args>
		<watch usage="Directory to watch">C:\work\dev\go\src\github.com\hackborn\broom_server</watch>
		<build usage="Directory under the watch path that contains the file to build">server</build>
		<run>server.exe</run>
	</args>

	<!-- Macros that can be used to make values in the nodes a little cleaner.
	Macro names can't conflict with any names in args. -->
	<macros>
		<build_folder>${watch}\${build}</build_folder>
	</macros>
	
	<nodes>
		<watcher>
			<folder>${watch}</folder>
		</watcher>
		<exec cmd="go" args="build" dir="${build_folder}" interrupt="false" rerun="false">
			<cmd method="stop" target="host" reply="true" />
		</exec>
		<exec name="host" cmd="${run}" dir="${build_folder}" interrupt="true" rerun="true" />
	</nodes>
</graph>
